---
Resources:
  LambdaBasicExecutionRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: LambdaBasicExecutionRole
      AssumeRolePolicyDocument:
        Version: "2012-10-17"
        Statement:
          - Effect: Allow
            Principal:
              Service:
                - lambda.amazonaws.com
            Action:
              - 'sts:AssumeRole'
      ManagedPolicyArns:
        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole

  CreditBureau:
    Type: AWS::Lambda::Function
    Properties:
      Role: !GetAtt LambdaBasicExecutionRole.Arn
      PackageType: Image
      Code:
        ImageUri: !Sub ${AWS.AccountId}.dkr.ecr.sa-east-1.amazonaws.com/creditbureau:latest
      FunctionName: loan-broker-CreditBureau

  MortgageQuoteRequest:
    Type: AWS::SNS::Topic
    Properties:
      TopicName: MortgageQuoteRequest

